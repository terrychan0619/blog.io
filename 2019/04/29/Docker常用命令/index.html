<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>Docker常用命令 - 蓝天，白云，大海，草原</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com"><span>Github</span></a></li><li><a href="https://www.v2ex.com/"><span>V2EX</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="http://callfiles.ueibo.com/hexo-theme-laughing/post_background.jpg"><div class="post-title"><h1 class="title">Docker常用命令</h1><ul class="meta"><li><i class="icon icon-author"></i>Terry Chan</li><li><i class="icon icon-clock"></i>13 Minutes</li><li><i class="icon icon-calendar"></i>April 29, 2019</li></ul></div></div><div class="article-content" style="max-width:800px"><h4 id="Docker常用命令"><a href="#Docker常用命令" class="headerlink" title="Docker常用命令"></a>Docker常用命令</h4><h5 id="docker-info-显示-Docker-系统信息，包括镜像和容器数"><a href="#docker-info-显示-Docker-系统信息，包括镜像和容器数" class="headerlink" title="docker info : 显示 Docker 系统信息，包括镜像和容器数"></a>docker info : 显示 Docker 系统信息，包括镜像和容器数</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker info [OPTIONS]</span><br></pre></td></tr></table></figure>
<h5 id="docker-version-显示-Docker-版本信息。"><a href="#docker-version-显示-Docker-版本信息。" class="headerlink" title="docker version :显示 Docker 版本信息。"></a>docker version :显示 Docker 版本信息。</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker version [OPTIONS]</span><br></pre></td></tr></table></figure>
<h5 id="docker-ps-列出容器"><a href="#docker-ps-列出容器" class="headerlink" title="docker ps : 列出容器"></a>docker ps : 列出容器</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker ps</span><br><span class="line"><span class="built_in">test</span>@<span class="built_in">test</span>:~$ docker ps</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                ...  PORTS                    NAMES</span><br><span class="line">09b93464c2f7   nginx:latest   <span class="string">"nginx -g 'daemon off"</span> ...  80/tcp, 443/tcp          mytest</span><br></pre></td></tr></table></figure>
<h5 id="docker-rm-：删除一个或多少容器"><a href="#docker-rm-：删除一个或多少容器" class="headerlink" title="docker rm ：删除一个或多少容器"></a>docker rm ：删除一个或多少容器</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker rm [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>
<h5 id="docker-pull-从镜像仓库中拉取或者更新指定镜像"><a href="#docker-pull-从镜像仓库中拉取或者更新指定镜像" class="headerlink" title="docker pull : 从镜像仓库中拉取或者更新指定镜像"></a>docker pull : 从镜像仓库中拉取或者更新指定镜像</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull [OPTIONS] NAME[:TAG|@DIGEST]</span><br><span class="line">-a :拉取所有 tagged 镜像</span><br><span class="line">--<span class="built_in">disable</span>-content-trust :忽略镜像的校验,默认开启</span><br></pre></td></tr></table></figure>
<h5 id="docker-search-从Docker-Hub查找镜像"><a href="#docker-search-从Docker-Hub查找镜像" class="headerlink" title="docker search : 从Docker Hub查找镜像"></a>docker search : 从Docker Hub查找镜像</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker search [OPTIONS] TERM</span><br><span class="line">--automated :只列出 automated build类型的镜像；</span><br><span class="line">--no-trunc :显示完整的镜像描述；</span><br><span class="line">-s :列出收藏数不小于指定值的镜像。</span><br></pre></td></tr></table></figure>
<h5 id="docker-kill-杀掉一个运行中的容器"><a href="#docker-kill-杀掉一个运行中的容器" class="headerlink" title="docker kill :杀掉一个运行中的容器"></a>docker kill :杀掉一个运行中的容器</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">kill</span> [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">-s :向容器发送一个信号</span><br></pre></td></tr></table></figure>
<h5 id="docker-start-启动一个或多个已经被停止的容器"><a href="#docker-start-启动一个或多个已经被停止的容器" class="headerlink" title="docker start :启动一个或多个已经被停止的容器"></a>docker start :启动一个或多个已经被停止的容器</h5><h5 id="docker-stop-停止一个运行中的容器"><a href="#docker-stop-停止一个运行中的容器" class="headerlink" title="docker stop :停止一个运行中的容器"></a>docker stop :停止一个运行中的容器</h5><h5 id="docker-restart-重启容器"><a href="#docker-restart-重启容器" class="headerlink" title="docker restart :重启容器"></a>docker restart :重启容器</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker start [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">$ docker stop [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">$ docker restart [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>
<h5 id="docker-exec-：在运行的容器中执行命令"><a href="#docker-exec-：在运行的容器中执行命令" class="headerlink" title="docker exec ：在运行的容器中执行命令"></a>docker exec ：在运行的容器中执行命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> [OPTIONS] CONTAINER COMMAND [ARG...]</span><br><span class="line">-d :分离模式: 在后台运行</span><br><span class="line">-i :即使没有附加也保持STDIN 打开</span><br><span class="line">-t :分配一个伪终端</span><br></pre></td></tr></table></figure>
<p>通过 exec 命令对指定的容器执行 bash:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it 9df70f9a0714 /bin/bash</span><br></pre></td></tr></table></figure></p>
<h5 id="docker-ps-列出容器-1"><a href="#docker-ps-列出容器-1" class="headerlink" title="docker ps : 列出容器"></a>docker ps : 列出容器</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ docker ps [OPTIONS]</span><br><span class="line">-a :显示所有的容器，包括未运行的。</span><br><span class="line">-f :根据条件过滤显示的内容。</span><br><span class="line">--format :指定返回值的模板文件。</span><br><span class="line">-l :显示最近创建的容器。</span><br><span class="line">-n :列出最近创建的n个容器。</span><br><span class="line">--no-trunc :不截断输出。</span><br><span class="line">-q :静默模式，只显示容器编号。</span><br><span class="line">-s :显示总的文件大小。</span><br></pre></td></tr></table></figure>
<h5 id="docker-events-从服务器获取实时事件"><a href="#docker-events-从服务器获取实时事件" class="headerlink" title="docker events : 从服务器获取实时事件"></a>docker events : 从服务器获取实时事件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs [OPTIONS] CONTAINER</span><br><span class="line">-f : 跟踪日志输出</span><br><span class="line">--since :显示某个开始时间的所有日志</span><br><span class="line">-t : 显示时间戳</span><br><span class="line">--tail :仅列出最新N条容器日志</span><br></pre></td></tr></table></figure>
<h5 id="docker-logs-获取容器的日志"><a href="#docker-logs-获取容器的日志" class="headerlink" title="docker logs : 获取容器的日志"></a>docker logs : 获取容器的日志</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">kill</span> [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">-s :向容器发送一个信号</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs --since=<span class="string">"2016-07-01"</span> --tail=10 mynginx</span><br></pre></td></tr></table></figure>
<h5 id="docker-port-列出指定的容器的端口映射，或者查找将PRIVATE-PORT-NAT到面向公众的端口"><a href="#docker-port-列出指定的容器的端口映射，或者查找将PRIVATE-PORT-NAT到面向公众的端口" class="headerlink" title="docker port :列出指定的容器的端口映射，或者查找将PRIVATE_PORT NAT到面向公众的端口"></a>docker port :列出指定的容器的端口映射，或者查找将PRIVATE_PORT NAT到面向公众的端口</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker port [OPTIONS] CONTAINER [PRIVATE_PORT[/PROTO]]</span><br></pre></td></tr></table></figure>
<h5 id="docker-cp-用于容器与主机之间的数据拷贝。"><a href="#docker-cp-用于容器与主机之间的数据拷贝。" class="headerlink" title="docker cp :用于容器与主机之间的数据拷贝。"></a>docker cp :用于容器与主机之间的数据拷贝。</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-</span><br><span class="line">$ docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH</span><br><span class="line">-L :保持源目标中的链接</span><br></pre></td></tr></table></figure>
<p>将主机/www/app目录拷贝到容器96f7fddsdb的/www目录下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker cp /www/app 96f7fddsdb:/www/</span><br></pre></td></tr></table></figure></p>
<h5 id="docker-build-命令用于使用-Dockerfile-创建镜像"><a href="#docker-build-命令用于使用-Dockerfile-创建镜像" class="headerlink" title="docker build 命令用于使用 Dockerfile 创建镜像"></a>docker build 命令用于使用 Dockerfile 创建镜像</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ docker build [OPTIONS] PATH | URL | -</span><br><span class="line">--build-arg=[] :设置镜像创建时的变量；</span><br><span class="line">--cpu-shares :设置 cpu 使用权重；</span><br><span class="line">--cpu-period :限制 CPU CFS周期；</span><br><span class="line">--cpu-quota :限制 CPU CFS配额；</span><br><span class="line">--cpuset-cpus :指定使用的CPU id；</span><br><span class="line">--cpuset-mems :指定使用的内存 id；</span><br><span class="line">--<span class="built_in">disable</span>-content-trust :忽略校验，默认开启；</span><br><span class="line">-f :指定要使用的Dockerfile路径；</span><br><span class="line">--force-rm :设置镜像过程中删除中间容器；</span><br><span class="line">--isolation :使用容器隔离技术；</span><br><span class="line">--label=[] :设置镜像使用的元数据；</span><br><span class="line">-m :设置内存最大值；</span><br><span class="line">--memory-swap :设置Swap的最大值为内存+swap，<span class="string">"-1"</span>表示不限swap；</span><br><span class="line">--no-cache :创建镜像的过程不使用缓存；</span><br><span class="line">--pull :尝试去更新镜像的新版本；</span><br><span class="line">--quiet, -q :安静模式，成功后只输出镜像 ID；</span><br><span class="line">--rm :设置镜像成功后删除中间容器；</span><br><span class="line">--shm-size :设置/dev/shm的大小，默认值是64M；</span><br><span class="line">--<span class="built_in">ulimit</span> :Ulimit配置。</span><br><span class="line">--tag, -t: 镜像的名字及标签，通常 name:tag 或者 name 格式；可以在一次构建中为一个镜像设置多个标签。</span><br><span class="line">--network: 默认 default。在构建期间设置RUN指令的网络模式</span><br></pre></td></tr></table></figure>
<p>使用当前目录的 Dockerfile 创建镜像，标签为 test/ubuntu:v1。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t <span class="built_in">test</span>/ubuntu:v1 .</span><br></pre></td></tr></table></figure></p>
<h5 id="docker的镜像源"><a href="#docker的镜像源" class="headerlink" title="docker的镜像源"></a>docker的镜像源</h5><p><a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a></p>
</div><div class="article-meta" style="max-width:800px"><div class="tags"><i class="icon icon-tag"></i><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a><span class="tag-list-count">1</span></li></ul></div><div class="categories"><i class="icon icon-category"></i><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><span class="category-list-count">1</span></li></ul></div></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2019/05/02/hello-world/"><i class="icon icon-arror-left"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="https://weibo.com/" title="Weibo" target="_blank"><i class="icon icon-weibo"></i></a></li><li><a href="https://www.segmentfault.com/" title="SegmentFault" target="_blank"><i class="icon icon-segmentfault"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2019 蓝天，白云，大海，草原<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>